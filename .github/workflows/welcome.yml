name: Welcome New Contributors

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      - name: Welcome new contributors
        uses: actions/github-script@v6
        with:
          script: |
            const { owner, repo } = context.repo;

            if (context.eventName === 'issues') {
              const issueAuthor = context.payload.issue.user.login;
              const issueNumber = context.payload.issue.number;

              // Check if this is the user's first issue
              const { data: issues } = await github.rest.issues.listForRepo({
                owner,
                repo,
                creator: issueAuthor,
                state: 'all'
              });

              if (issues.length === 1) {
                await github.rest.issues.createComment({
                  owner,
                  repo,
                  issue_number: issueNumber,
                  body: |
                    🎉 **Welcome to DevToolkit!** 🎉

                    Hi @${{ github.event.issue.user.login }}! Thanks for opening your first issue. We're excited to have you as part of our Hacktoberfest 2025 community!

                    🚀 **Getting Started:**
                    - Check out our [Contribution Guidelines](CONTRIBUTING.md)
                    - Read the [Tool Template](TOOL_TEMPLATE.md) for adding new tools
                    - Join our [Discussions](https://github.com/${{ github.repository }}/discussions) for any questions

                    🏆 **Perfect for Hacktoberfest:**
                    - This is a beginner-friendly project
                    - We have clear guidelines and templates
                    - Fast review and merge process

                    Happy coding! 🛠️✨
                });
              }
            }

            if (context.eventName === 'pull_request') {
              const prAuthor = context.payload.pull_request.user.login;
              const prNumber = context.payload.pull_request.number;

              // Check if this is the user's first PR
              const { data: prs } = await github.rest.pulls.list({
                owner,
                repo,
                creator: prAuthor,
                state: 'all'
              });

              if (prs.length === 1) {
                await github.rest.issues.createComment({
                  owner,
                  repo,
                  issue_number: prNumber,
                  body: |
                    🎉 **Awesome! Your first PR!** 🎉

                    Hi @${{ github.event.pull_request.user.login }}! Thank you for your first pull request to DevToolkit!

                    🔍 **What's Next:**
                    - Our team will review your PR soon
                    - Make sure you've followed our [Design Guidelines](TOOL_TEMPLATE.md)
                    - Check that your tool works on both desktop and mobile

                    🏆 **Hacktoberfest 2025:**
                    - Your contribution counts towards Hacktoberfest!
                    - High-quality PRs get fast approval
                    - You'll be featured on our Contributors Wall 🌟

                    Thanks for making DevToolkit better! 🚀
                });
              }
            }